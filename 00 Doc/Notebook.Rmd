---
title: "<center><b>Visualization Obesity Data</b></center>"
author: "<center><b>Austin Anderson,Brian Kim, Christina Lien</b></center>"
output:
  html_document:
    toc: yes
  pdf_document:
    toc: yes
    
###The Project Notebook is [here](Notebook.html).
###GitHub Repository is [here](https://github.com/CannataUTDV/s17dvproject6-dvproject-4-anderson-kim-lien)
---

#**Introduction**
This is our R Notebook used to show how to detailing the 3 Tableau visualizations and a Shiny publication of obesity data in the United States. The dataset was retrieved through data.world and cleaned up using an ETL script that we built. This includes our instructions on how to access the data as well as our process of creating the 3 visualizations and Shiny publication from the data set in question.

#**R Configuration**
Below, we display our sessionInfo().

```{r source}
sessionInfo(package=NULL)
```

#**Data Background**
The data displayed represents the data grabbed from the "Obesity by State in 2014" dataset from Data.world (https://data.world/health/obesity-by-state-2014). The data was originally 2 separate tables containing adult obesity rates and adolescent obesity rates. The two tables were cleaned-up using ETL scripts that we built for this project. Then the 2 tables were merged into 1 using a union. Here is the ETL Script that we created.

```{r}
source("../01 Data/adolescent obesity ETL.R")
```

```{r}
source("../01 Data/adult obesity ETL.R")
```
We also utilized joins to make the visualizations more interesting. We used a state table that divided up the different states into regions (https://data.world/markmarkoh/us-state-table), the US Census data for population (https://data.world/uscensusbureau/acs-2015-5-e-agesex), and Community Health Status Indicator (CHSI) data (https://data.world/health/chsi-to-combat-obesity). The ETL scripts for those data sets are below.

```{r}
source("../01 Data/statetable ETL.R")
```

```{r}
source("../01 Data/population_byage ETL.R")
```

```{r}
source("../01 Data/heartdisease ETL.R")
```

```{r}
source("../01 Data/RiskFactors ETL.R")
```
#**Downloading the Data File**
The cleaned up data file is hosted on Data.World. You can access it by going to this web address: https://data.world/christinalien/s-17-dv-final-project. Next, click the download button in the upper right hand corner of the screen. Download the file into a CSVs folder at the same level as the project folder. The file will download as a compressed (zipped) file containing a .csv file. Unzip the package, rename the csv to PreETL_adultobese.csv and PreETL_adolescentobese.csv and you should have the data file ready to go, just run the ETL.r script and it should clean up the data. Next, the cleaned up data was uploaded back into data.world and, using the query editor, we created a new column 'Age' that displayed Adult for the adult data and Adolescent for the adolescent data. Then, we combined the two tables using a union, downloaded the results to a csv, and uploaded the final result of the table as "Adult_Adolescent_Obesity.csv".

#**Data Visualization Introduction**


#**Tableau Data Visualization 1** 
![Boxplot of Obesity Rates per State](../03 Visualizations/National Obesity Rates per State.PNG) 

The first visualization shows us the national average of obesity rates per age group (Adolescent and Adult). While the boxplot shows the averages, we wanted the viewer to be able to see the states that have high or low rates compared to the national average. This is why there is a combination of a scatterplot and boxplot in the shiny visualization. 

The boxplot shows us that, on average, the Adolescents age group has a significantly lower rate than the national Adult average of obesity. While the Adolescent average obesity rate is only 12.9, the Adult group has more than double the rate at 29.4. Furthermore, through the shiny app, we are able to see that states with low Adolescent rates, Utah, have low Adult rates. This trend can also be seen in the high percentages for both groups (i.e. Arkansas). 

#**Tableau Data Visualization 2** 
![Histogram of Fruits/Vegs](../03 Visualizations/Histogram of FruitsVegs.PNG) 

The histogram of Max Fruits/Veggies 

#**Tableau Data Visualization 3** 
![Percent Fruits/Vegs per State](../03 Visualizations/Percent FruitsVeg per State.PNG) 

By producing the calculated field of (([CI_Max_Fruit_Veg]/100)/100)*[totalpop], we were able to apply the states to the field and create a visualization that shows us how much of each state's population were getting low amounts of fruits and vegetables in their diet. The visualization not only tells us the population number, but also visually represents the highest populations of malnutrition.

The visualization points out that the trends seen from the boxplot cannot fully be reflected in the malnutrition data. For example, Texas is on the higher end of obesity rates compared to the national average (as seen by the boxplot) and also boasts one of the largest populations of malnutrition. However, the states California, New York, and Florida have high populations of malnutrition, but still remain lower than the national average in terms of obesity. 

#**Shiny Publication**

https://bkim.shinyapps.io/finalproject/

#**Conclusion**
Thanks for showing an interest in our work, we hope you enjoyed the ways we decided to visualize obesity data throughout different slices of the United States.